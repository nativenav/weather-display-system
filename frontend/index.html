<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Display System - Management</title>
    <link rel="stylesheet" href="styles.css?v=2.0.0">
</head>
<body>
    <div class="container">
        <header>
            <h1>🌤️ Weather Display System</h1>
            <p>Management Interface</p>
            <div class="status-indicator">
                <span id="backend-status" class="status offline">Checking...</span>
            </div>
        </header>

        <main>
            <!-- Navigation Tabs -->
            <nav class="tabs-nav">
                <button class="tab-button active" data-tab="overview">📊 Live</button>
                <button class="tab-button" data-tab="forecasts">🌤️ Forecasts</button>
                <button class="tab-button" data-tab="devices">📱 Devices</button>
                <button class="tab-button" data-tab="stations">📍 Stations</button>
                <button class="tab-button" data-tab="config">⚙️ Configuration</button>
            </nav>

            <!-- Overview Tab -->
            <div class="tab-content active" id="overview-tab">
                <!-- Latest Data -->
                <section class="card">
                    <h2>📊 Latest Weather Data</h2>
                    <div class="data-controls">
                        <div class="controls-left">
                            <button id="refresh-data" class="btn btn-secondary">🔄 Refresh Data</button>
                            <div class="unit-selector">
                                <label for="wind-unit-select">Wind Speed Unit:</label>
                                <select id="wind-unit-select">
                                    <option value="ms">m/s</option>
                                    <option value="kts">knots</option>
                                    <option value="kph">km/h</option>
                                </select>
                            </div>
                        </div>
                        <span id="last-refresh" class="timestamp"></span>
                    </div>
                    <div id="weather-data-container">
                        <!-- Weather data will be loaded here -->
                    </div>
                </section>
            </div>

            <!-- Forecasts Tab -->
            <div class="tab-content" id="forecasts-tab">
                <section class="card">
                    <h2>🌤️ Weather Forecasts</h2>
                    <div class="forecast-controls">
                        <div class="controls-left">
                            <button id="refresh-forecasts" class="btn btn-secondary">🔄 Refresh Forecasts</button>
                            <div class="region-selector">
                                <label for="forecast-region-select">Region:</label>
                                <select id="forecast-region-select">
                                    <option value="both">Both Regions</option>
                                    <option value="chamonix">Chamonix (Les Houches)</option>
                                    <option value="solent">Solent (Cowes)</option>
                                </select>
                            </div>
                        </div>
                        <span id="forecast-last-refresh" class="timestamp"></span>
                    </div>
                    <div class="forecast-description">
                        <p>10-hour weather forecasts updated every hour. Sky conditions and temperature data provided by Meteoblue.</p>
                    </div>
                    <div id="forecast-data-container">
                        <!-- Forecast data will be loaded here -->
                    </div>
                </section>
            </div>

            <!-- Devices Tab -->
            <div class="tab-content" id="devices-tab">
                <section class="card">
                    <h2>📱 Device Management</h2>
                    <div class="section-header">
                        <p>Manage ESP32C3 weather display devices. Devices auto-register when they connect for the first time.</p>
                        <div class="actions">
                            <button id="refresh-devices" class="btn btn-secondary">🔄 Refresh Devices</button>
                            <button id="scan-devices" class="btn btn-primary">🔍 Scan for New Devices</button>
                        </div>
                    </div>
                    <div id="devices-container">
                        <!-- Devices will be loaded here -->
                    </div>
                </section>
            </div>

            <!-- Stations Tab -->
            <div class="tab-content" id="stations-tab">
                <section class="card">
                    <h2>📍 Weather Stations</h2>
                    <div id="stations-container">
                        <!-- Stations will be loaded here -->
                    </div>
                    <div class="actions">
                        <button id="refresh-stations" class="btn btn-secondary">🔄 Refresh Stations</button>
                        <button id="collect-all" class="btn btn-primary">📊 Collect All Data</button>
                    </div>
                </section>
            </div>

            <!-- Configuration Tab -->
            <div class="tab-content" id="config-tab">
                <section class="card">
                    <h2>⚙️ System Configuration</h2>
                    <div class="config-grid">
                        <div class="config-item">
                            <label for="cron-frequency">Collection Frequency</label>
                            <select id="cron-frequency">
                                <option value="*/5 * * * *">Every 5 minutes</option>
                                <option value="*/10 * * * *">Every 10 minutes</option>
                                <option value="*/15 * * * *">Every 15 minutes</option>
                                <option value="*/30 * * * *">Every 30 minutes</option>
                                <option value="0 * * * *">Every hour</option>
                            </select>
                            <button id="update-cron" class="btn btn-primary">Update</button>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer>
            <p>Weather Display System v0.1.0</p>
        </footer>
    </div>

    <script src="script.js?v=2.0.0"></script>
</body>
</html>
